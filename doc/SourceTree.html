<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>《版本管理git回滚、重置、提交以及SourceTree复杂操作》 | Mischieff技术分享交流</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog/assets/images/logo.png">
    <meta name="description" content="前端技术分享交流会">
    <meta name="author" content="Mischieff">
    <meta name="keywords" content="vue,前端技术分享交流会,mis">
    <link rel="preload" href="/blog/assets/css/0.styles.ce5bf294.css" as="style"><link rel="preload" href="/blog/assets/js/app.d0acf852.js" as="script"><link rel="preload" href="/blog/assets/js/2.72c4cc30.js" as="script"><link rel="preload" href="/blog/assets/js/10.5014fd50.js" as="script"><link rel="prefetch" href="/blog/assets/js/11.8b9de7e2.js"><link rel="prefetch" href="/blog/assets/js/12.b8a53940.js"><link rel="prefetch" href="/blog/assets/js/13.d6ea9d45.js"><link rel="prefetch" href="/blog/assets/js/14.2377e15c.js"><link rel="prefetch" href="/blog/assets/js/15.57c75a61.js"><link rel="prefetch" href="/blog/assets/js/3.6915d159.js"><link rel="prefetch" href="/blog/assets/js/4.2b1304f1.js"><link rel="prefetch" href="/blog/assets/js/5.07d818df.js"><link rel="prefetch" href="/blog/assets/js/6.acdb2a2d.js"><link rel="prefetch" href="/blog/assets/js/7.22a77f1e.js"><link rel="prefetch" href="/blog/assets/js/8.029b509f.js"><link rel="prefetch" href="/blog/assets/js/9.114dad7d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.ce5bf294.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/blog/" class="router-link-active home-link"><img src="/blog/assets/images/logo.png" alt="Mischieff技术分享交流" class="logo"> <span class="site-name">Mischieff技术分享交流</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/blog/" class="router-link-active">
          主页
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          文件
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="https://github.com/mischieff" target="_blank">
          Github
          <i aria-label="icon: link" class="anticon anticon-link"><svg viewBox="64 64 896 896" focusable="false" data-icon="link" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M574 665.4a8.03 8.03 0 0 0-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 0 0-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 0 0 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 0 0 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 0 0-11.3 0L372.3 598.7a8.03 8.03 0 0 0 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"></path></svg></i></a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>文件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/doc/Qiankun.html" title="《微前端（Qiankun）》" class="sidebar-link">《微前端（Qiankun）》</a></li><li><a href="/blog/doc/VuePress.html" title="《Markdown搭建前端博客（VuePress）》" class="sidebar-link">《Markdown搭建前端博客（VuePress）》</a></li><li><a href="/blog/doc/Nodejs.html" title="《Nodejs初识》" class="sidebar-link">《Nodejs初识》</a></li><li><a href="/blog/doc/Uniapp.html" title="《uniapp初识》" class="sidebar-link">《uniapp初识》</a></li><li><a href="/blog/doc/React.html" title="《React初识》" class="sidebar-link">《React初识》</a></li><li><a href="/blog/doc/SourceTree.html" aria-current="page" title="《版本管理git回滚、重置、提交以及SourceTree复杂操作》" class="active sidebar-link">《版本管理git回滚、重置、提交以及SourceTree复杂操作》</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/doc/SourceTree.html#一、git简介" title="一、GIT简介" class="sidebar-link">一、GIT简介</a></li><li class="sidebar-sub-header"><a href="/blog/doc/SourceTree.html#二、命令行基本操作" title="二、命令行基本操作" class="sidebar-link">二、命令行基本操作</a></li><li class="sidebar-sub-header"><a href="/blog/doc/SourceTree.html#三、source-tree-操作" title="三、Source Tree 操作" class="sidebar-link">三、Source Tree 操作</a></li></ul></li><li><a href="/blog/doc/Typora.html" title="《Typora的使用（markdown标记语言）》" class="sidebar-link">《Typora的使用（markdown标记语言）》</a></li><li><a href="/blog/doc/Electron.html" title="《Electron桌面应用初识》" class="sidebar-link">《Electron桌面应用初识》</a></li><li><a href="/blog/doc/Nginx.html" title="《nginx代理vue技术分享》" class="sidebar-link">《nginx代理vue技术分享》</a></li><li><a href="/blog/doc/emoji.html" title="《Emoji 表情》" class="sidebar-link">《Emoji 表情》</a></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="《版本管理git回滚、重置、提交以及sourcetree复杂操作》"><a href="#《版本管理git回滚、重置、提交以及sourcetree复杂操作》" class="header-anchor">#</a> 《版本管理git回滚、重置、提交以及SourceTree复杂操作》</h1> <div class="cc-speaker-content color2"><span class="cc-speaker">主讲：蔡老师 </span> <span class="cc-wrap"><span class="cc-stage">第六期</span></span></div> <h2 id="一、git简介"><a href="#一、git简介" class="header-anchor">#</a> 一、GIT简介</h2> <blockquote><p>Git是一个开源的分布式版本控制系统，可以<code>有效</code>、<code>高速</code>的处理从很小到非常大的项目版本管理。</p></blockquote> <ul><li><p>对非线性开发有非常强的支持</p></li> <li><p>分布式、协作式开发处理代码冲突的能力强</p></li> <li><p>数据结构更优，更适合管理大规模工程</p></li> <li><p>社区更活跃，生态更完整</p></li></ul> <h2 id="二、命令行基本操作"><a href="#二、命令行基本操作" class="header-anchor">#</a> 二、命令行基本操作</h2> <h3 id="_1、git基本配置"><a href="#_1、git基本配置" class="header-anchor">#</a> 1、Git基本配置</h3> <p><code>git config</code>可以配置git的参数，可以使用<code>git config --list</code>查看已经配置的git参数。</p> <p><strong>配置用户名及邮箱</strong></p> <blockquote><p>在使用Git提交前，必须配置用户名和邮箱，这些信息会永久保存到历史记录中。</p></blockquote> <div class="language-json line-numbers-mode"><pre class="language-json"><code>git config --global user.name <span class="token string">&quot;cpy&quot;</span>
git config --global user.email xxxx@qq.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2、创建git仓库"><a href="#_2、创建git仓库" class="header-anchor">#</a> 2、创建Git仓库</h3> <p>直接调用<code>git init</code>初始化当前目录，即创建Git仓库。</p> <h3 id="_3、获得git仓库"><a href="#_3、获得git仓库" class="header-anchor">#</a> 3、获得Git仓库</h3> <p>如果需要克隆远程仓库，可以使用<code>git clone</code>，例如：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>git clone http<span class="token operator">:</span><span class="token comment">//gitlab.zq.com:8888/fattan/frontend.git</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4、提交更新"><a href="#_4、提交更新" class="header-anchor">#</a> 4、提交更新</h3> <h4 id="git文件状态"><a href="#git文件状态" class="header-anchor">#</a> git文件状态</h4> <p><img src="/blog/assets/images/SourceTree/git-clipboard0.png" alt="img"></p> <ul><li><h3 id="git-status"><a href="#git-status" class="header-anchor">#</a> git status</h3> <p>通常提交前先检查下修改了什么内容，当前Git目录下各文件的状态。</p> <p><img src="/blog/assets/images/SourceTree/git-clipboard1.png" alt="img"></p></li> <li><h3 id="git-add"><a href="#git-add" class="header-anchor">#</a> git add</h3> <p>可以添加文件或者目录，也可以使用通配符。比如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git add Readme.md    # add file only
git add *.cpp        # add all cpp files
git add /home/code/  # add all files in /home/code
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>多文件提交：使用$ git add .  注意最后的“.”不要忘记。一次性提交项目下所有文件到版本库</p></li> <li><h3 id="git-diff"><a href="#git-diff" class="header-anchor">#</a> git diff</h3> <p><code>git diff</code>可以查看当前目录的所有修改。</p></li> <li><h3 id="git-commit-m"><a href="#git-commit-m" class="header-anchor">#</a> git commit -m</h3> <p>文件添加到版本库</p> <p><img src="/blog/assets/images/SourceTree/git-clipboard2.png" alt="img"></p></li> <li><h3 id="git-rm"><a href="#git-rm" class="header-anchor">#</a> git rm</h3> <p><code>git rm</code>会把文件从当前目录删除（不会保存删除的文件）。如果需要从Git仓库中删除，但保留在当前工作目录中，亦即从跟踪清单中删除，可以使用<code>git rm --cached readme.md</code>。</p></li></ul> <h3 id="_5、提交历史查看"><a href="#_5、提交历史查看" class="header-anchor">#</a> 5、提交历史查看</h3> <blockquote><p>执行命令<code>git log</code>后，提交人、邮箱、时间、备注信息显示出来，如图：</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-clipboard3.png" alt="img"></p> <h3 id="_6、撤销操作"><a href="#_6、撤销操作" class="header-anchor">#</a> 6、撤销操作</h3> <blockquote><p>本地仓库的代码还原操作叫做<code>撤销</code></p> <p>修改最后一次版本区提交：提交信息写错了。想要撤消刚才的提交操作，</p> <p><code>$ git commit --amend</code>  选项重新提交，如图所示：</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-clipboard4.png" alt="img"></p> <blockquote><p>对文件进行修改放入缓存区之后<code>$ git commit –amend</code>进入修改区域</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-clipboard5.png" alt="img"></p> <p>修改完成后 按下<code>Esc</code>键  使用<code>:wq</code>退出不要忘了前面的<code>:</code></p> <h3 id="_7、代码回滚"><a href="#_7、代码回滚" class="header-anchor">#</a> 7、代码回滚</h3> <ul><li><h5 id="在工作区的代码"><a href="#在工作区的代码" class="header-anchor">#</a> 在工作区的代码</h5> <blockquote><p><code>丢弃文件操作</code></p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git checkout <span class="token operator">--</span> a<span class="token punctuation">.</span>txt  # 丢弃某个文件

git checkout <span class="token operator">--</span> <span class="token punctuation">.</span>      # 丢弃全部
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><h5 id="代码git-add到缓存区-并未commit提交"><a href="#代码git-add到缓存区-并未commit提交" class="header-anchor">#</a> 代码git add到缓存区，并未commit提交</h5> <blockquote><p><code>回滚缓存区文件操作</code>，此命令仅改变暂存区，并不改变工作区，这意味着在无任何其他操作的情况下，工作区中的实际文件同该命令运行之前无任何变化</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git reset HEAD <span class="token punctuation">.</span>		# 回滚暂存所有

git reset HEAD a<span class="token punctuation">.</span>txt	# 回滚暂存某个文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><h5 id="git-commit到本地分支、但没有git-push到远程"><a href="#git-commit到本地分支、但没有git-push到远程" class="header-anchor">#</a> git commit到本地分支、但没有git push到远程</h5> <blockquote><p><code>回滚本地分支文件操作</code>，此命令是在git commit到本地分支之后、但没有git push到远程时的操作。</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git log 						# 得到你需要回退一次提交的commit id 
git reset <span class="token operator">--</span>hard <span class="token generics"><span class="token punctuation">&lt;</span>commit_id<span class="token punctuation">&gt;</span></span> 	# 回到其中你想要的某个版
git reset <span class="token operator">--</span>hard HEAD<span class="token operator">^</span> 			# 回到最新的一次提交
git reset HEAD<span class="token operator">^</span> 				# 此时代码保留，回到 git add 之前
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><h5 id="git-push把修改提交到远程仓库"><a href="#git-push把修改提交到远程仓库" class="header-anchor">#</a> git push把修改提交到远程仓库</h5> <h6 id="_1-通过git-reset是直接删除指定的commit"><a href="#_1-通过git-reset是直接删除指定的commit" class="header-anchor">#</a> 1）通过git reset是直接删除指定的commit</h6> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git log 						# 得到你需要回退一次提交的commit id
git reset <span class="token operator">--</span>hard <span class="token generics"><span class="token punctuation">&lt;</span>commit_id<span class="token punctuation">&gt;</span></span>	# 强制返回上一次提交的源码状态
git push origin HEAD <span class="token operator">--</span>force 	# 强制提交一次，之前错误的提交就从远程仓库删除
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h6 id="_2-通过git-revert是用一次新的commit来回滚之前的commit"><a href="#_2-通过git-revert是用一次新的commit来回滚之前的commit" class="header-anchor">#</a> 2）通过git revert是用一次新的commit来回滚之前的commit</h6> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git log 				# 得到你需要回退一次提交的commit id
git revert <span class="token generics"><span class="token punctuation">&lt;</span>commit_id<span class="token punctuation">&gt;</span></span> 	# 撤销指定的版本，撤销也会作为一次提交进行保存
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h6 id="_3-git-revert-和-git-reset的区别"><a href="#_3-git-revert-和-git-reset的区别" class="header-anchor">#</a> 3） git revert 和 git reset的区别</h6> <ul><li><code>git revert</code>是用一次新的commit来回滚之前的commit，此次提交之前的commit都会被保留；</li> <li><code>git reset</code>是回到某次提交，提交及之前的commit都会被保留，但是此commit id之后的修改都会被删除</li></ul></li></ul> <h3 id="_8、远程仓库"><a href="#_8、远程仓库" class="header-anchor">#</a> 8、远程仓库</h3> <blockquote><p>可以使用<code>git remote</code>查看当前的远程库。<code>git remote -v</code>可以显示对应的克隆地址。（对于多个远程仓库很有用）</p></blockquote> <ol><li><p><strong>添加远程仓库</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git remote add <span class="token punctuation">[</span>short_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span>	# 可以添加新的远程仓库。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><strong>从远程仓库抓取数据</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git fetch <span class="token punctuation">[</span>remote<span class="token operator">-</span>name<span class="token punctuation">]</span>		# 可以从远程仓库抓取数据到本地。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以使用<code>git pull</code></p></li> <li><p><strong>推送数据到远程仓库</strong></p></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git push <span class="token punctuation">[</span>remote_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch_name<span class="token punctuation">]</span>	# 默认使用origin和master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li><strong>查看远程仓库信息</strong></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git remote show origin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li><strong>远程仓库的删除和重命名</strong></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>git remote rename <span class="token punctuation">[</span>old_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>new_name<span class="token punctuation">]</span>
git remote rm <span class="token punctuation">[</span>remote_name<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_9、-分支"><a href="#_9、-分支" class="header-anchor">#</a> 9、 分支</h3> <ol><li><strong>显示所有分支</strong></li></ol> <p>使用<code>git branch</code>可显示当前所有分支。可以使用--merged和--no-merged查看已经合并、未合并的分支。</p> <p><img src="/blog/assets/images/SourceTree/git-clipboard6.png" alt="img"></p> <ol start="2"><li><p><strong>创建及切换分支</strong></p> <p>可以使用下面命令直接切换并创建分支</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git checkout -b testing	# 创建testing 分支
git branch testing    	# 创建testing 分支
git checkout testing  	# 切换到testing分支
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/blog/assets/images/SourceTree/git-clipboard7.png" alt="img"></p> <p><img src="/blog/assets/images/SourceTree/git-clipboard8.png" alt="img"></p> <p><code>注意</code>：切换分支时请保持工作目录没有未提交的修改。Git鼓励使用分支，处理完问题之后合并分支即可</p></li> <li><p><strong>分支合并</strong></p> <p>将dev分支合并到master（主分支）上，需要通过下面命令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ git checkout master
$ git merge hotfix
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/blog/assets/images/SourceTree/git-clipboard9.png" alt="img"></p> <p>合并之后可以使用<code>git branch -d dev</code>删除分支。如果合并时存在冲突，需要手工修改。</p></li> <li><p><strong>删除分支</strong></p></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>git branch -d  		#分支的删除
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/images/SourceTree/git-clipboard10.png" alt="img"></p> <p><code>注意</code>：要删除分支不能在当前分支删除，必须切换到其他分支才能删除</p> <ol start="5"><li><strong>修改分支名</strong></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>git branch -m 		# 分支名字 新名字来进行分支的重命名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/images/SourceTree/git-clipboard11.png" alt="img"></p> <h2 id="三、source-tree-操作"><a href="#三、source-tree-操作" class="header-anchor">#</a> 三、Source Tree 操作</h2> <h3 id="_1、拉取代码"><a href="#_1、拉取代码" class="header-anchor">#</a> 1、拉取代码</h3> <blockquote><p>Sourcetree顶部菜单栏&quot;文件&quot; &gt; “克隆/新建”。</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-clipboard12.png" alt="img"></p> <blockquote><p>在弹出的Tab页中，选择默认的&quot;Clone&quot;，输入获取到的Git地址。</p> <p><code>注意</code>：这里使用的HTTP格式的地址</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-20210113160848712.png" alt="img"></p> <h3 id="_2、提交代码"><a href="#_2、提交代码" class="header-anchor">#</a> 2、提交代码</h3> <p><img src="/blog/assets/images/SourceTree/git-20210113161500490.png" alt="img"></p> <p><img src="/blog/assets/images/SourceTree/git-20210113161606315.png" alt="img"></p> <h3 id="_3、新建分支"><a href="#_3、新建分支" class="header-anchor">#</a> 3、新建分支</h3> <p><img src="/blog/assets/images/SourceTree/git-clipboard16.png" alt="img"></p> <p><img src="/blog/assets/images/SourceTree/git-clipboard17.png" alt="img"></p> <h3 id="_4、合并分支"><a href="#_4、合并分支" class="header-anchor">#</a> 4、<strong>合并分支</strong></h3> <p><img src="/blog/assets/images/SourceTree/git-clipboard18.png" alt="img"></p> <blockquote><p>把【3.2.0】合并到【master】，分支切换到master</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-clipboard19.png" alt="img"></p> <p><img src="/blog/assets/images/SourceTree/git-clipboard20.png" alt="img"></p> <p><img src="/blog/assets/images/SourceTree/git-clipboard21.png" alt="img"></p> <p><img src="C:%5CUsers%5Czq%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cgit%5Cgit-clipboard22.png" alt="img"></p> <h3 id="_5、删除分支"><a href="#_5、删除分支" class="header-anchor">#</a> 5、删除分支</h3> <ul><li><p><strong>本地删除</strong></p> <blockquote><p>右键目标分支，删除即可</p> <p>注意：这里是本地删除，不影响远程仓库。如果切换目标分支时，不能进行删除操作。</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-20210113182729031.png" alt="img"></p></li> <li><p><strong>远程删除</strong></p> <blockquote><p>右键目标分支，删除即可。【慎重】</p></blockquote></li></ul> <p><img src="/blog/assets/images/SourceTree/git-20210113182914306.png" alt="img"></p> <h3 id="_6、回滚代码"><a href="#_6、回滚代码" class="header-anchor">#</a> 6、回滚代码</h3> <p>这里的回滚大概分为三种：</p> <ul><li>回滚本地修改。（此时还未进行本地Commit）</li> <li>回滚本地的Commit。（此时还未推送到远程Git服务器）</li> <li>回滚已经推送到Server端的Commit。</li></ul> <h5 id="_6-1-回滚本地修改"><a href="#_6-1-回滚本地修改" class="header-anchor">#</a> 6.1 <strong>回滚本地修改</strong></h5> <blockquote><p>只需要在未暂存区选中对应的文件，右键选择&quot;丢弃&quot;即可</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-20210113162727942.png" alt="img"></p> <h5 id="_6-2回滚本地commit"><a href="#_6-2回滚本地commit" class="header-anchor">#</a> 6.2<strong>回滚本地Commit</strong></h5> <blockquote><p>需要选取所要回滚Commit之前的那个Commit节点</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-20210113173052898.png" alt="image-20210113173052898"></p> <blockquote><p>弹出的交互框中，三个选项中推荐直接使用默认的混合合并，然后点击确认即可</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-20210113173210719.png" alt="image-20210113173210719"></p> <p><img src="/blog/assets/images/SourceTree/git-20210113173342640.png" alt="image-20210113173342640"></p> <p><strong>使用模式说明</strong></p> <p><img src="/blog/assets/images/SourceTree/git-20210113173441676.png" alt="image-20210113173441676"></p> <h5 id="_6-3回滚server端commit"><a href="#_6-3回滚server端commit" class="header-anchor">#</a> 6.3<strong>回滚Server端Commit</strong></h5> <blockquote><p>首选需要选中想要进行回滚的Commit节点，如下：</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-20210113175946276.png" alt="image-20210113175946276"></p> <p><img src="/blog/assets/images/SourceTree/git-20210113180346426.png" alt="image-20210113180346426"></p> <blockquote><p>确认之后将自动生成类似下图中的Commit，然后推送即可</p></blockquote> <p><img src="/blog/assets/images/SourceTree/git-20210113180520699.png" alt="image-20210113180520699"></p> <h3 id="_7、解决冲突"><a href="#_7、解决冲突" class="header-anchor">#</a> 7、解决冲突</h3> <p>由于某些原因发生代码冲突的问题，这类问题在Sourcetree中表现如下：</p> <p><img src="/blog/assets/images/SourceTree/git-20210113181453009.png" alt="image-20210113181453009"></p> <p>解决方法：</p> <p>1）本地代码中手动解决；</p> <p>2）外部合并工具：Beyond Compare</p> <p>​	下载地址：https://www.beyondcompare.cc/</p> <p>​	右键选中发生冲突的文件，最终选择打开外部合并工具，解决完冲突之后，再次提交文件即可。</p> <p><img src="/blog/assets/images/SourceTree/git-20210113160868712.png" alt="在这里插入图片描述"></p> <h3 id="_8、git工作流"><a href="#_8、git工作流" class="header-anchor">#</a> 8、git工作流</h3> <blockquote><p>如果想要开发新的需求，或者修复bug，可使用该工具git工作流。</p></blockquote> <h5 id="_1-需要对项目流进行初始化"><a href="#_1-需要对项目流进行初始化" class="header-anchor">#</a> 1）需要对项目流进行初始化</h5> <p><img src="/blog/assets/images/SourceTree/image-20210114104739763.png" alt="image-20210114104739763"></p> <p>直接点“确定”，获取develop分支源码</p> <p><img src="/blog/assets/images/SourceTree/569926-20170109090719056-2130711032.png" alt="img"></p> <h5 id="_2-分支共有5种类型"><a href="#_2-分支共有5种类型" class="header-anchor">#</a> 2）分支共有5种类型</h5> <ul><li>master，最终发布版本，整个项目中有且只有一个</li> <li>develop，项目的开发分支，原则上项目中有且只有一个</li> <li>feature，功能分支，用于开发一个新的功能</li> <li>release，预发布版本，介于develop和master之间的一个版本，主要用于测试</li> <li>hotfix，修复补丁，用于修复master上的bug，直接作用于master</li></ul> <h5 id="_3-需求分支feature"><a href="#_3-需求分支feature" class="header-anchor">#</a> 3）需求分支feature</h5> <blockquote><p>当开发中需要增加一个新的功能时，可新建feature分支，用于增加新功能，并且不影响开发中的develop源码，当新功能增加完成后，完成feature分支，将新功能合并到develop中，更新develop上的代码</p></blockquote> <ul><li><p>新建feature。首先当前开发分支指向develop，点击“Git工作流”</p> <p><img src="/blog/assets/images/SourceTree/image-20210114105404056.png" alt="image-20210114105404056"></p></li> <li><p>选择“建立新的分支”</p> <p><img src="/blog/assets/images/SourceTree/569926-20170109092139150-347914709.png" alt="img"></p></li></ul> <blockquote><p>在预览中可看到，feature分支是从develop分出的，输入功能名称，点击确定，项目结构中增加feature分支，并且当前开发分支指向新建的feature分支，在该分支下进行开发任务，并提交</p></blockquote> <p><img src="/blog/assets/images/SourceTree/image-20210114105713084.png" alt="image-20210114105713084"></p> <ul><li><p>成feature开发后，将feature中的源码合并到develop分支，点击“Git工作流”，选择“完成功能”，点击确定，进行提交合并</p> <blockquote><p>当多人协作开发时，可能会出现，不同人员对同一文件进行操作，从而引起合并冲突，对这种情况进行模拟，在当前新建两个feature，分别对feature文件进行修改，然后分别合并</p></blockquote></li></ul> <p><img src="/blog/assets/images/SourceTree/image-20210114105916457.png" alt="image-20210114105916457"></p> <p><img src="/blog/assets/images/SourceTree/image-20210114110009740.png" alt="image-20210114110009740"></p> <h5 id="_4-预发布测试阶段"><a href="#_4-预发布测试阶段" class="header-anchor">#</a> 4） 预发布测试阶段</h5> <blockquote><p>可以从develop分支，建立release分支，进入预发布测试阶段。点击“Git工作流”，选择“建立新的发布版本”</p></blockquote> <p><img src="/blog/assets/images/SourceTree/569926-20170109131712931-768836924.png" alt="img"><img src="/blog/assets/images/SourceTree/569926-20170109131739541-592120046.png" alt="img"></p> <blockquote><p>release是从develop分出的，输入发布版本名‘R_v1.0’，点击确定</p></blockquote> <p><img src="/blog/assets/images/SourceTree/569926-20170109131916556-1163021502.png" alt="img"></p> <p><code>R_v1.0为阶段性发布版本，主要用于发布前进行测试，后续的开发工作仍旧在develop上进行，如果在测试过程中发现问题，直接在release上进行修改，修改完成后进行提交</code></p> <h5 id="_5-补丁hotfix"><a href="#_5-补丁hotfix" class="header-anchor">#</a> 5) 补丁hotfix</h5> <blockquote><p>当正式版本出现问题时，需要进行问题的修改，可以在master分支建立修改补丁hotfix。将当前分支切换到master，点击“Git工作流”，选择“建立新的修复补丁”</p></blockquote> <p><img src="/blog/assets/images/SourceTree/image-20210114110554502.png" alt="image-20210114110554502"></p> <p><img src="/blog/assets/images/SourceTree/image-20210114110622943.png" alt="image-20210114110622943"></p> <blockquote><p>点击确认即可</p></blockquote> <p><img src="/blog/assets/images/SourceTree/image-20210114110742159.png" alt="image-20210114110742159"></p> <blockquote><p>修复完成后，可向master和develop分别合并，点击确定，完成分支合并</p></blockquote> <p><img src="/blog/assets/images/SourceTree/image-20210114110851126.png" alt="image-20210114110851126"></p> <p><img src="/blog/assets/images/SourceTree/image-20210114111001777.png" alt="image-20210114111001777"></p> <p><code>补充</code>：从远程拉取分支，在该分支下完成开发，应“双击”远程的该分支，出现“检出新分支”，之后点击“确定”，就将远程分支拉取到本地了。</p> <p><img src="/blog/assets/images/SourceTree/image-20210114111113879.png" alt="image-20210114111113879"></p> <p>至此，版本管理git回滚、重置、提交以及SourceTree复杂操作全部完成！！！</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2021年1月29日晚上6点56分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/doc/React.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        《React初识》
      </a></span> <span class="next"><a href="/blog/doc/Typora.html">
        《Typora的使用（markdown标记语言）》
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.d0acf852.js" defer></script><script src="/blog/assets/js/2.72c4cc30.js" defer></script><script src="/blog/assets/js/10.5014fd50.js" defer></script>
  </body>
</html>