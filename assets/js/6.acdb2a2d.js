(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{558:function(s,a,t){"use strict";t.r(a);var n=t(67),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"《nginx代理vue》"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#《nginx代理vue》"}},[s._v("#")]),s._v(" 《nginx代理vue》")]),s._v(" "),t("div",{staticClass:"cc-speaker-content color5"},[t("span",{staticClass:"cc-speaker"},[s._v("主讲：Mischieff")]),s._v(" "),t("span",{staticClass:"cc-wrap"},[t("span",{staticClass:"cc-stage"},[s._v("第三期")])])]),s._v(" "),t("h2",{attrs:{id:"一、nginx代理vue的意义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、nginx代理vue的意义"}},[s._v("#")]),s._v(" 一、nginx代理vue的意义")]),s._v(" "),t("p",[s._v("vue打包后,因为开发环境设置代理 "),t("strong",[t("code",[s._v("proxy")])]),s._v(" 的原因, 使得访问打包页面 "),t("strong",[t("code",[s._v("dist/index.html")])]),s._v(" 请求数据出现跨域。"),t("br"),s._v("\nnginx代理vue的意义在于把开发环境中的代理 "),t("strong",[t("code",[s._v("proxy: {'/api': ...")])]),s._v(" 的/api, 换成生产环境中的地址。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"二、下载nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、下载nginx"}},[s._v("#")]),s._v(" 二、下载nginx")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx官网"),t("OutboundLink")],1),s._v("下载并解压，推荐使用稳定版本（nginx/Windows-1.18.0）"),t("br"),t("br"),s._v(" "),t("img",{attrs:{src:"/blog/assets/images/Nginx/vue-nginxToVue1.png",alt:"nginx官网"}})]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"三、vue打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、vue打包"}},[s._v("#")]),s._v(" 三、vue打包")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v(" npm run build "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打包文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("(默认)生成文件夹 "),t("code",[s._v("dist")])]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"四、放入nginx中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、放入nginx中"}},[s._v("#")]),s._v(" 四、放入nginx中")]),s._v(" "),t("p",[s._v("把生成的 "),t("strong",[t("code",[s._v("dist下所有文件")])]),s._v(" 放入压缩后nginx中 "),t("code",[s._v("html")]),s._v(" 文件夹下"),t("br"),s._v(" "),t("img",{attrs:{src:"/blog/assets/images/Nginx/vue-nginxToVue2.png",alt:"放入nginx中"}})]),s._v(" "),t("p",[t("br"),t("br")]),s._v(" "),t("h2",{attrs:{id:"五、配置nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、配置nginx"}},[s._v("#")]),s._v(" 五、配置nginx")]),s._v(" "),t("p",[s._v("进入nginx的 "),t("strong",[t("code",[s._v("conf")])]),s._v(" 文件夹中, 打开 "),t("strong",[t("code",[s._v("nginx.conf")])]),s._v(" 文件进行代理配置"),t("br"),s._v(" "),t("img",{attrs:{src:"/blog/assets/images/Nginx/vue-nginxToVue3.png",alt:"配置nginx"}})]),s._v(" "),t("ul",[t("li",[s._v("默认监听端口为 "),t("strong",[t("code",[s._v("80")])]),s._v(", 可自行更改")]),s._v(" "),t("li",[s._v("默认监听地址为 "),t("strong",[t("code",[s._v("localhost")])]),s._v(", 可自行更改")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("添加代理")])]),s._v(" "),t("ul",[t("li",[s._v("在 "),t("strong",[t("code",[s._v("server")])]),s._v(" 中配置；")]),s._v(" "),t("li",[t("strong",[t("code",[s._v("/api/")])]),s._v(" 为vue中代理的值；")]),s._v(" "),t("li",[t("strong",[t("code",[s._v("proxy_pass")])]),s._v(" 需要代理的IP地址，"),t("strong",[s._v("必填")]),s._v("，其他可忽略")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("location "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    # 可省略开始\n    rewrite  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重定向")]),s._v("\n    proxy_redirect off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_set_header Host $host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_set_header "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("X")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Real"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v(" $remote_addr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_set_header "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("X")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("For $proxy_add_x_forwarded_for"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    # 可省略结束\n\n    # 必填\n    proxy_pass  http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("192.168.1.10:8888")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    #node api server 即需要代理的"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("地址\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("br"),t("br")]),s._v(" "),t("h2",{attrs:{id:"六、启动nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、启动nginx"}},[s._v("#")]),s._v(" 六、启动nginx")]),s._v(" "),t("p",[s._v("双击 **"),t("code",[s._v("nginx.exe")]),s._v("**进行启动（一闪而过，若出现命令行界面，则说明配置有误）"),t("br"),s._v(" "),t("img",{attrs:{src:"/blog/assets/images/Nginx/vue-nginxToVue4.png",alt:"启动nginx"}})]),s._v(" "),t("h2",{attrs:{id:"七、访问打包后的页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七、访问打包后的页面"}},[s._v("#")]),s._v(" 七、访问打包后的页面")]),s._v(" "),t("p",[s._v("打开浏览器，访问 "),t("strong",[t("code",[s._v("第五节")])]),s._v(" 设置的地址和端口（此处为localhost:80）"),t("br"),s._v("\n至此，nginx代理vue打包结束。")])])}),[],!1,null,null,null);a.default=r.exports}}]);